# ç©·ä¸¾æ³•å­—ç¬¦ä¸²æœç´¢

å¦‚æœä½ éœ€è¦ç”¨çº¯ç²¹çš„ Swift æ¥å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²æœç´¢ç®—æ³•ï¼Œè€Œä¸”ä¸å…è®¸å¼•å…¥ Foundation åº“å’Œä¸å…è®¸ä½¿ç”¨ `NSString` çš„ `rangeOfString()` æ–¹æ³•ï¼Œå¯ä»¥æ€ä¹ˆå†™å‘¢ï¼Ÿ

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç»™ `String` å®ç°ä¸€ä¸ªæ‰©å±•æ–¹æ³• `indexOf(pattern: String)` å¹¶è¿”å›ç¬¬ä¸€ä¸ªæœç´¢åˆ°çš„ç›®æ ‡æ¨¡å¼çš„ `String.Index`ï¼Œæˆ–è€…åœ¨æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹è¿”å› `nil`ã€‚
 
æ¯”æ–¹è¯´ï¼š

```swift
// è¾“å…¥ï¼š
let s = "Hello, World"
s.indexOf(pattern: "World")

// è¾“å‡ºï¼š
<String.Index?> 7

// è¾“å…¥ï¼š
let animals = "ğŸ¶ğŸ”ğŸ·ğŸ®ğŸ±"
animals.indexOf(pattern: "ğŸ®")

// è¾“å‡ºï¼š
<String.Index?> 6
```

> **æ³¨æ„ï¼š** ğŸ® çš„ä¸‹æ ‡æ˜¯ 6ï¼Œè€Œä¸æ˜¯é¢„æ–™ä¸­çš„ 3ï¼Œæ˜¯å› ä¸ºå­—ç¬¦ä¸²åœ¨å­˜å‚¨è¡¨æƒ…ç¬¦å·çš„æ—¶å€™ä¼šä½¿ç”¨æ›´å¤šçš„ç©ºé—´ã€‚ä¸è¿‡æ—¢ç„¶æ‰¾åˆ°äº†æ­£ç¡®çš„å­—ç¬¦ï¼Œ`String.Index` çš„å…·ä½“æ•°å€¼å°±ä¸é‡è¦äº†ã€‚

ä¸‹é¢æ˜¯ä¸€ç§ç©·ä¸¾çš„è§£æ³•ï¼š

```swift
extension String {
  func indexOf(_ pattern: String) -> String.Index? {
    for i in self.characters.indices {
        var j = i
        var found = true
        for p in pattern.characters.indices{
            if j == self.characters.endIndex || self[j] != pattern[p] {
                found = false
                break
            } else {
                j = self.characters.index(after: j)
            }
        }
        if found {
            return i
        }
    }
    return nil
  }
}
```

è¿™ä¼šæŒ‰é¡ºåºæ£€æŸ¥æºå­—ç¬¦ä¸²é‡Œçš„æ¯ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœå­—ç¬¦ä¸ç›®æ ‡å­—ç¬¦ä¸²é‡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸åŒï¼Œé‚£ä¹ˆå†…å¾ªç¯å°±ä¼šæ£€æŸ¥å…¶ä½™å­—ç¬¦æ˜¯ä¸æ˜¯éƒ½ç›¸åŒã€‚å¦‚æœå†…å¾ªç¯æ²¡èƒ½å®Œæˆä»»åŠ¡ï¼Œé‚£ä¹ˆå¤–å¾ªç¯å°±ä¼šä»åˆšåˆšçš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ç›´åˆ°æ‰¾åˆ°äº†ç›®æ ‡å­—ç¬¦ä¸²æˆ–è€…å·²ç»åˆ°è¾¾äº†æºå­—ç¬¦ä¸²çš„ç»“å°¾ã€‚

ç©·ä¸¾æ³•æ˜¯èƒ½ç”¨çš„ï¼Œä½†å®ƒå¹¶ä¸æ˜¯é‚£ä¹ˆé«˜æ•ˆï¼ˆæˆ–è€…è¯´æŒºä½æ•ˆçš„ï¼‰ã€‚ä¸è¿‡ï¼Œåœ¨å¤„ç†æ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²æ—¶è¿˜æ˜¯å¯ä»¥ç”¨çš„ã€‚å¦‚æœæƒ³è¦æ›´é«˜æ•ˆå¤„ç†æ›´å¤§é‡çš„æ–‡å­—ï¼Œå°±å»çœ‹çœ‹[æ‘©å°”å­—ç¬¦ä¸²](../Boyer-Moore-Horspool)æœç´¢å§ã€‚

*åŸæ–‡å‡ºè‡ª Matthijs Hollemans*
